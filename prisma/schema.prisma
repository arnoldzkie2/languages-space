generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// client schema area

model Client {
  id            String         @id @unique @default(uuid()) @db.VarChar(256)
  profile       String?
  name          String
  user_name     String         @unique
  phone_number  String
  email         String?        @unique
  gender        String
  card          Json? // this could be postpaidcard or prepaidcard
  type          String
  organization  Json?
  password      String
  address       String
  origin        String
  tags          Json?
  note          String?
  date          DateTime       @default(now())
  postpaid_card PostpaidCard[]
  prepaid_card  PrepaidCard[]
}

model PostpaidCard {
  id                String  @id @unique @default(uuid()) @db.VarChar(256)
  price             Int
  settlement_period String
  invoice           Boolean
  client            Client? @relation(fields: [client_id], references: [id])
  client_id         String?
}

model PrepaidCard {
  id               String  @id @unique @default(uuid()) @db.VarChar(256)
  price            Int
  balance          Int
  invoice          Boolean
  validity         String
  online_purchases Boolean
  online_renews    Boolean
  repeat_purchases Boolean
  client           Client? @relation(fields: [client_id], references: [id])
  client_id        String?
}

// supplier schema area

model Supplier {
  id                  String   @id @unique @default(uuid()) @db.VarChar(256)
  profile             String?
  name                String
  user_name           String   @unique
  type                String
  organization        Json?
  payment_information Json?
  phone_number        String
  password            String
  email               String   @unique
  address             String
  gender              String
  card                Json?
  origin              String?
  tags                Json
  note                String
  status              String
  entry               DateTime
  departure           DateTime
  date                DateTime @default(now())
}

model SupplierCard {
  id   String             @id @unique @default(uuid()) @db.VarChar(256)
  name SupplierCardType[]
  type Json
}

model SupplierCardType {
  id             String        @id @unique @default(uuid()) @db.VarChar(256)
  SupplierCard   SupplierCard? @relation(fields: [supplierCardId], references: [id])
  supplierCardId String?
  fixed_salary   Json?
  commission     Json?
}

// agent schema area

model Agent {
  id                  String   @id @unique @default(uuid()) @db.VarChar(256)
  profile             String?
  name                String
  user_name           String   @unique
  password            String
  type                String
  organization        Json?
  payment_information Json?
  phone_number        String
  email               String   @unique
  address             String
  gender              String
  card                Json?
  origin              String
  note                String
  date                DateTime @default(now())
}

model AgentCard {
  id   String @id @unique @default(uuid()) @db.VarChar(256)
  type Json
  name String
  link String
}

// order schema area 

model Order {
  id             String   @id @unique @default(uuid()) @db.VarChar(256)
  booking_date   DateTime
  name           String
  client_name    String
  card           Json
  quantity       Int
  price          Float
  operator       String
  note           String?
  status         String
  invoice_number Int
  express_number Int
  date           DateTime @default(now())
}

// admin schema area

model Admin {
  id        String   @id @default(uuid()) @db.VarChar(256)
  name      String
  user_name String   @unique
  email     String
  password  String
  date      DateTime @default(now())
}

model SuperAdmin {
  id        String   @id @default(uuid()) @db.VarChar(256)
  name      String
  user_name String   @unique
  email     String
  password  String
  date      DateTime @default(now())
}

// department schema area

model Department {
  id   String   @id @unique @default(uuid()) @db.VarChar(256)
  name String
  date DateTime @default(now())
}
